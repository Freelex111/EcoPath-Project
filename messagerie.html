<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Messagerie ECOPATH</title>
    <link rel="stylesheet" href="messagerie.css">
</head>
<script>
window.addEventListener("DOMContentLoaded", function () {
    const headerImg = document.getElementById("header-avatar");
    const nameDisplay = document.getElementById("user-name-display");

    const savedPhoto = localStorage.getItem("userPhoto");
    const savedName = localStorage.getItem("userName");

    if (savedPhoto && savedPhoto !== "null") {
        headerImg.src = savedPhoto;
    } else {
        headerImg.src = "images/default-avatar.png"; // image par dÃ©faut
    }

    if (savedName) {
        nameDisplay.textContent = savedName;
    }
});
</script>

<body>

    <!-- ===== NAVBAR ===== -->
    <header class="navbar">
    
    <!-- Gauche -->
    <div class="nav-left">
        <a class="company-name" href="index.html">ECOPATH</a>
    </div>

    <!-- Centre -->
    <div class="nav-center">
        <div class="user-profile">
            <img src="images/default-avatar.png" class="user-icon" id="header-avatar">
            <div class="user-name" id="user-name-display">Utilisateur</div>
        </div>
    </div>

    <!-- Droite -->
    <div class="nav-right">
        <div class="nav-title">MESSAGERIE</div>
    </div>

</header>

    <!-- ===== ZONE CHAT ===== -->
    <div class="chat-container">

    <div class="chat-header">
        ğŸ’¬ Service Client ECOPATH
        <span class="status">â— En ligne</span>
    </div>

    <div class="chat-messages" id="chat-messages">
        <div class="message bot">Bonjour ğŸ‘‹ Comment pouvons-nous vous aider ?</div>
    </div>

    <div class="typing" id="typing">ECOPATH Ã©crit...</div>

    <div class="chat-input">
        <input type="text" id="message-input" placeholder="Ã‰crivez votre message...">
        <button id="send-btn">â¤</button>
    </div>

</div>


<script>
const sendBtn = document.getElementById("send-btn");
const input = document.getElementById("message-input");
const chat = document.getElementById("chat-messages");
const typing = document.getElementById("typing");

sendBtn.addEventListener("click", sendMessage);
input.addEventListener("keypress", e => { if(e.key === "Enter") sendMessage(); });

function sendMessage() {
    if(input.value.trim() === "") return;

    const msg = document.createElement("div");
    msg.className = "message user";
    msg.textContent = input.value;
    chat.appendChild(msg);
    chat.scrollTop = chat.scrollHeight;
    input.value = "";

    // ECOPATH "Ã©crit..."
    typing.style.display = "block";

    setTimeout(() => {
        typing.style.display = "none";

        const reply = document.createElement("div");
        reply.className = "message bot";

        const responses = [
            "Merci ğŸŒ¿ Nous analysons votre demande.",
            "Un agent ECOPATH vous rÃ©pondra bientÃ´t.",
            "Nous aimons aider nos partenaires Ã©cologiques ğŸ’š",
            "Votre message a bien Ã©tÃ© reÃ§u."
        ];

        reply.textContent = responses[Math.floor(Math.random()*responses.length)];
        chat.appendChild(reply);
        chat.scrollTop = chat.scrollHeight;

    }, 1500);
}

</script>

</body>
</html>
