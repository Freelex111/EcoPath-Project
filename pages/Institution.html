<!DOCTYPE html> 
<html lang="fr">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>ECOPATH - Institution</title>
   <link rel="stylesheet" href="../css/dashboard.css">
</head>

<body>

    <header class="navbar">
    <div class="nav-left">
        <a class="company-name" href="../index.html">ECOPATH</a>
    </div>

    <nav class="menu-dashboards">
        <a href="fournir.html" class="nav-item">Espace Collecteur</a>
        <a href="client.html" class="nav-item">Espace Client</a>
        <a href="Institution.html" class="nav-item active">Espace Institution</a>
    </nav>

    <div class="nav-right">
        <a href="Positionnement-profil.html" class="profile-link-wrapper">
            <div class="user-profile">
                <span class="user-name" id="user-name-display">Utilisateur</span>
                <img src="https://via.placeholder.com/60" alt="Profil" class="user-icon" id="header-avatar">
            </div>
        </a>
    </div>
</header>
    <!-- LAYOUT PRINCIPAL -->
    <div class="main-layout">
        <!-- MENU GAUCHE -->
        <div class="side-menu">
            <button data-img="../images/icons/impact.png" >IMPACT √âCO-RESPONSABLE ‚ôªÔ∏è</button>
            <button data-img="../images/icons/Logistiques.png" >LOGISTIQUE & RAMASSAGE üöõ</button>
            <button data-img="../images/icons/Certificat.png" >CERTIFICATS & LABELS üìú</button>
            <button data-img="../images/icons/Amenage.png" >PROJET AM√âNAGEMENT üèóÔ∏è</button>
            <button id="btn-messagerie">MESSAGERIE üí¨</button>
             <button id="btn-deconnexion">D√âCONNEXION </button>
        </div>

        <!-- ZONE DE CONTENU -->
        <div class="content-area">
            <!-- MESSAGE DE BIENVENUE CENTR√â -->
            <section class="welcome-message" id="welcome-message">
                <h2>Bienvenue sur votre page Institution !</h2>
                <p>Ici, vous pouvez suivre vos collectes, g√©rer vos projets RSE et visualiser l'impact √©cologique de votre institution.</p>
            </section>

            <!-- TABLETTE MASQU√âE AU D√âBUT -->
            <div class="tablet-frame" id="tablet-frame" style="display: none; position: relative;">
                <!-- Overlay noir ECOPATH -->
                <div class="tablet-overlay" id="tablet-overlay" style="display: none;">
                    <div class="door-left"></div>
                    <div class="door-right"></div>
                    <div class="tablet-overlay-text">ECOPATH</div>
                </div>
                <!-- Image √† afficher apr√®s animation -->
                <img id="display-image" src="" alt="Image affich√©e">
                <!-- Description dynamique -->
                <div id="display-desc" class="tablet-description"></div>
            </div>
        </div>
    </div>

    <!-- SCRIPT POUR L‚ÄôANIMATION DES PORTES ET TABLETTE -->
    <script>
        const buttons = document.querySelectorAll(".side-menu button");
        const displayImage = document.getElementById("display-image");
        const tabletOverlay = document.getElementById("tablet-overlay");
        const tabletFrame = document.getElementById("tablet-frame");
        const welcomeMessage = document.getElementById("welcome-message");
        const displayDesc = document.getElementById("display-desc");

        buttons.forEach(button => {
            button.addEventListener("click", () => {
                const imgSrc = button.getAttribute("data-img"); 
                const descText = button.getAttribute("data-desc");
                displayImage.src = imgSrc;
                displayDesc.textContent = descText;

                // Cacher le message de bienvenue
                if (welcomeMessage.style.display !== "none") {
                    welcomeMessage.style.display = "none";
                }

                // Afficher la tablette
                if (tabletFrame.style.display !== "flex") {
                    tabletFrame.style.display = "flex";
                    tabletFrame.style.flexDirection = "column";
                    tabletFrame.style.alignItems = "center";
                    tabletFrame.style.justifyContent = "center";
                }

                // R√©initialiser overlay pour relancer animation
                tabletOverlay.style.display = "flex";
                tabletOverlay.classList.remove("open");
                displayImage.classList.remove("show");

                // Lancer animation portes
                setTimeout(() => {
                    tabletOverlay.classList.add("open");
                }, 50);

                // Afficher image apr√®s ouverture
                setTimeout(() => {
                    displayImage.classList.add("show");
                    tabletOverlay.style.display = "none";
                }, 1100);
            });
        });

        // Bouton Messagerie
        document.getElementById("btn-messagerie").addEventListener("click", () => {
            window.location.href = "messagerie.html";
        });document.getElementById("btn-deconnexion").addEventListener("click", () => {
    localStorage.removeItem('userPhoto');
    localStorage.removeItem('userName');
    window.location.href = "../index.html"; // redirection vers page d'accueil
});



        // Charger photo et nom depuis la page profil
        window.onload = function() {
            const savedPhoto = localStorage.getItem('userPhoto');
            const savedName = localStorage.getItem('userName');
            const headerImg = document.getElementById('header-avatar');
            const nameDisplay = document.getElementById('user-name-display');

            if(savedPhoto) headerImg.src = savedPhoto;
            if(savedName) nameDisplay.textContent = savedName;
        };
    </script>

</body>
</html>
