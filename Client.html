<!DOCTYPE html>
<html lang="fr">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>ECOPATH - Client</title>
   <link rel="stylesheet" href="Style3.css">
</head>

<body>

    <!-- BARRE VERTE -->
    <header class="navbar">
        <!-- Gauche : Nom entreprise -->
        <div class="nav-left">
            <a class="company-name" href="index.html">ECOPATH</a>
        </div>

        <!-- Centre : Profil utilisateur -->
        <div class="nav-center">
            <div class="user-profile">
                <img src="https://via.placeholder.com/60" alt="Profil" class="user-icon" id="header-avatar">
                <div class="user-name" id="user-name-display">Utilisateur</div>
            </div>
        </div>
    </header>

    <!-- LAYOUT PRINCIPAL -->
    <div class="main-layout">

        <!-- MENU GAUCHE CLIENT -->
        <div class="side-menu">
            <button data-img="images/bord.png">TABLEAU DE BORD üèóÔ∏è</button>
            <button data-img="images/ccommandes.png">MES COMMANDES üì¶</button>
            <button data-img="images/Projet.png">NOUVEAU PROJET üßÆ</button>
            <button data-img="images/factures.png">MES FACTURES üßæ</button>
            <button id="btn-messagerie">MESSAGERIE üí¨</button>
             <button id="btn-deconnexion">D√âCONNEXION </button>
        </div>

        <!-- ZONE DE CONTENU -->
        <div class="content-area">

            <!-- MESSAGE DE BIENVENUE CENTR√â -->
            <section class="welcome-message" id="welcome-message">
                <h1>Bienvenue sur votre espace Client ECOPATH !</h1>
                <p>Suivez vos commandes de pav√©s √©cologiques, lancez de nouveaux projets et consultez vos factures en toute simplicit√©.</p>
            </section>

            <!-- TABLETTE MASQU√âE AU D√âBUT -->
            <div class="tablet-frame" id="tablet-frame" style="display: none; position: relative;">
                <!-- Overlay noir ECOPATH -->
                <div class="tablet-overlay" id="tablet-overlay" style="display: none;">
                    <div class="door-left"></div>
                    <div class="door-right"></div>
                    <div class="tablet-overlay-text">ECOPATH</div>
                </div>
                <!-- Image √† afficher apr√®s animation -->
                <img id="display-image" src="" alt="Image affich√©e">
            </div>

        </div> <!-- content-area -->

    </div> <!-- main-layout -->

    <!-- SCRIPT POUR L‚ÄôANIMATION DES PORTES ET TABLETTE -->
    <script>
        const buttons = document.querySelectorAll(".side-menu button");
        const displayImage = document.getElementById("display-image");
        const tabletOverlay = document.getElementById("tablet-overlay");
        const tabletFrame = document.getElementById("tablet-frame");
        const welcomeMessage = document.getElementById("welcome-message");

        buttons.forEach(button => {
            button.addEventListener("click", () => {
                const imgSrc = button.getAttribute("data-img"); 
                displayImage.src = imgSrc;

                // Cacher le message de bienvenue si c'est le premier clic
                if (welcomeMessage.style.display !== "none") {
                    welcomeMessage.style.display = "none";
                }

                // Afficher la tablette si cach√©e
                if (tabletFrame.style.display !== "flex") {
                    tabletFrame.style.display = "flex";
                }

                // R√©initialiser overlay pour pouvoir relancer l‚Äôanimation
                tabletOverlay.style.display = "flex";
                tabletOverlay.classList.remove("open");
                displayImage.classList.remove("show"); // cacher l‚Äôimage avant animation

                // Lancer animation portes
                setTimeout(() => {
                    tabletOverlay.classList.add("open");
                }, 50);

                // Afficher l‚Äôimage apr√®s l‚Äôouverture
                setTimeout(() => {
                    displayImage.classList.add("show");
                    tabletOverlay.style.display = "none"; // masquer overlay
                }, 1100); // 1,1s = dur√©e de l‚Äôanimation portes
            });
        });

        // Bouton Messagerie (ouvre une nouvelle page)
        document.getElementById("btn-messagerie").addEventListener("click", () => {
            window.location.href = "messagerie.html";
        });
    </script>

    <script>
        // Charger photo et nom depuis la page profil
        window.onload = function() {
            const savedPhoto = localStorage.getItem('userPhoto'); // photo depuis la page profil
            const savedName = localStorage.getItem('userName');   // nom depuis la page profil

            const headerImg = document.getElementById('header-avatar');
            const nameDisplay = document.getElementById('user-name-display');

            if(savedPhoto) headerImg.src = savedPhoto;
            if(savedName) nameDisplay.textContent = savedName;
        };

        document.getElementById("btn-deconnexion").addEventListener("click", () => {
    localStorage.removeItem('userPhoto');
    localStorage.removeItem('userName');
    window.location.href = "index.html"; // redirection vers page d'accueil
});

    </script>

</body>
</html>
